<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StayYatra</title>
    <!-- linking custom css file -->
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/date-picker.css" />
    <!-- linking css of bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- linking fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- linking swiper css -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />
    <!-- linking google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
      rel="stylesheet"
    />
    <!-- ‚úÖ vendor css file-->
    <link rel="stylesheet" href="/vendor/aos.css" />    
    <link rel="stylesheet" href="/vendor/datepicker-bs5.min.css" />
    
    <link
      href="https://fonts.googleapis.com/css2?family=Mukta+Vaani&display=swap"
      rel="stylesheet"
    />
    <!-- Add in head section -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <!-- Or use a simple emoji favicon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>"
    />
    <!-- Add Font Awesome 6 CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
    
  </head>
  <body class="d-flex flex-column min-vh-100">
    <%- include("../includes/navbar.ejs") %>

    <div class="container flex-grow-1">
      <% if (success && success.length > 0) { %>
      <div
        class="alert alert-success alert-dismissible fade show w-100"
        role="alert"
        data-aos="fade-right"
      >
        <%= success[0] %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      <% } %> <% if (error && error.length > 0) { %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <%= error[0] %>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      <% } %> <%- body %>
    </div>

    <!-- ‚úÖ Modals for login and register -->
    <div id="loginModalTrigger" data-show="<%= triggerLoginModal %>"></div>
    <div
      id="registerModalTrigger"
      data-show="<%= triggerRegisterModal %>"
    ></div>

    <!-- ‚úÖ Include the login modal here -->
    <%- include("../includes/loginModal.ejs") %>
    <!-- ‚úÖ Include the register modal here -->
    <%- include("../includes/registerModal.ejs") %> <%-
    include("../includes/passwordModal.ejs") %> <%-
    include("../includes/footer.ejs") %>

    <!-- ‚úÖ Scripts loaded in correct order -->
    <!-- Bootstrap Bundle JS FIRST (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Other scripts -->
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="/vendor/aos.js"></script>
    <script src="/vendor/datepicker-full.min.js"></script>

    <!-- Custom scripts LAST -->
    <script src="/js/script.js"></script>
    <script src="/js/formScript.js"></script>
    <script src="/js/textstylingScript.js"></script>
    <script src="/js/forgetpasswordscript.js"></script>
    <script src="/js/booking.js"></script>
    <!-- ‚úÖ Initialize everything after DOM loads -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize AOS
        AOS.init({
          duration: 1000,
          once: true,
        });

        // Check for login errors safely
        const loginErrors =
          '<%= typeof loginError !== "undefined" ? loginError : "" %>';
        if (loginErrors && loginErrors.length > 0) {
          const loginModal = new bootstrap.Modal(
            document.getElementById("loginModal")
          );
          loginModal.show();
        }
      });
    </script>
  </body>
</html>
